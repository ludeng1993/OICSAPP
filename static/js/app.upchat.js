(function(e,t,n){t.M=t.M||{};t.M.NAPI=t.M.NAPI||{};var i=function(){var e=window.PhoneGap||window.Cordova||window.cordova;return e};var r=function(){var e=window.wkWebkit;return e};var o=function(){var e=window.pcelectron;return e};var a=function(e){return typeof e=="string"&&e.constructor==String};function u(){var e=navigator.userAgent.toLowerCase();return/upchat/.test(e)?true:false}function s(){var e=navigator.userAgent.toLowerCase();var t=new RegExp(/(android)\s+([\d.]+)/);return t.test(e)}function c(){var e=navigator.userAgent.toLowerCase();var t=new RegExp(/nitro/);return t.test(e)}function l(){var e=navigator.userAgent.toLowerCase();var t=new RegExp(/electron/);return t.test(e)}var f=function(e,t,n,u,s,f){var v={status:"3",msg:"该版本不支持该接口，请下载最新版本使用"};var p=u=="showWaterMark"||u=="hiddenWaterMark";var w=function(t){if(p){clearTimeout(h)}var n="";try{n=a(t)?JSON.parse(t):t}catch(i){n=t}!!e&&e.apply(null,[n])};var d=function(e){if(p){clearTimeout(h)}var n="";try{n=a(e)?JSON.parse(e):e;if(p&&e=="Invalid action"){n=v}}catch(i){n=e;if(p&&e=="Invalid action"){n=v}}!!t&&t.apply(null,[n])};if(p){var h=setTimeout(function(){!!t&&t.apply(null,[v])},500)}if(c()){r().require("wkWebkit/exec")(w,d,n,u,[s,f])}else if(l()){o().requireMol("pcelectron/exec")(w,d,n,u,[s,f])}else{i().exec(w,d,n,u,[s,f])}};e.extend(t.M.NAPI,{showWaitingView:function(){if(u()){f(null,null,"UPWebUI","showWaitingView",{})}},showLoadingView:function(){if(u()){f(null,null,"UPWebUI","showLoadingView",{})}},showFlashInfo:function(e){if(u()){f(null,null,"UPWebUI","showFlashInfo",e)}},showAlertView:function(e,t,n){if(u()){f(e,t,"UPWebUI","showAlertView",n)}},dismiss:function(){if(u()){f(null,null,"UPWebUI","dismiss",{})}},startNewWebView:function(e,t){if(u()){f(null,null,"UPWebUI","startNewWebView",e,t)}},closeWebView:function(e){if(u()){f(null,null,"UPWebUI","closeWebView",e)}},showWaterMark:function(e,t,n){if(u()){f(e,t,"UPWebUI","showWaterMark",n)}},hiddenWaterMark:function(e,t,n){if(u()){f(e,t,"UPWebUI","hiddenWaterMark",n)}},setBarStatus:function(e){if(u()){f(null,null,"UPWebBars","setBarStatus",e)}},setNavigationBarTitle:function(e){if(u()){f(null,null,"UPWebBars","setNavigationBarTitle",e)}},setNavigationBarSubTitle:function(e){if(u()){f(null,null,"UPWebBars","setNavigationBarSubTitle",e)}},cleanSubTitle:function(){if(u()){f(null,null,"UPWebBars","cleanSubTitle",{})}},setNavigationBarColor:function(e){if(u()){f(null,null,"UPWebBars","setNavigationBarColor",e)}},setMoreButton:function(e){if(u()){f(null,null,"UPWebBars","setMoreButton",e)}},getSecurity:function(e,t){if(u()){f(e,t,"UPChatPluginPublicAccount","getSecurity",{})}},getDomainSecurity:function(e,t){if(u()){f(e,t,"UPChatPluginPublicAccount","getDomainSecurity",{})}else{t()}},fetchUserId:function(e,t){if(u()){f(e,t,"UPChatPlugin","fetchUserId",{})}},getApplicationList:function(e,t){if(u()){f(e,t,"UPApplication","getApplicationList")}},returnOpenSchemeApp:function(e,t){if(u()){f(e,t,"UPOpenSchemeApp","returnOpenSchemeApp")}},getLocation:function(e,t){if(u()){f(e,t,"UPLocation","getLocation",{})}},openFileChooser:function(e,t){if(u()&&s()){f(e,t,"FileChooser","open",{})}},choosePhoto:function(e,t){if(u()){f(e,t,"UPImagePicker","chooseImage",{})}},showPhotos:function(e,t,n){if(u()){f(e,t,"UPWebUI","showPhotos",n)}},showMenu:function(e,t,n){if(u()){f(e,t,"UPWebUI","showMenu",n)}},openPublicChat:function(e,t,n){if(u()){f(e,t,"UPChatPlugin","openPublicChat",n)}else{t()}},getAesKey:function(e,t){if(u()){f(e,t,"UPImagePicker","getaeskey",{})}},validateShare:function(e,t,n){if(u()){f(e,t,"UPShare","validateShare",n)}},shareApp:function(e,t,n){if(u()){f(e,t,"UPShareApp","shareApp",n)}},getGestureSecurity:function(e,t){if(u()){f(e,t,"UPChatPluginPublicAccount","getGestureSecurity",{})}},startPay:function(e,t,n){if(u()){f(e,t,"UPBasicPay","startPay",n)}}});t.M.init=function(e){if(u()){if(c()){if(window.webkit&&window.webkit.messageHandlers){e()}}else if(l()){e()}else{document.addEventListener("deviceready",e,false)}}else{e()}};t.M.isNative=u})(jQuery,window.UPCHAT=window.UPCHAT||{});var query2Obj=function(e){if(e[0]==="?"||e[0]==="#"){e=e.substring(1)}var t={};e.replace(/\b([^&=]*)=([^&=]*)/g,function(e,n,i){if(typeof t[n]!="undefined"){t[n]+=","+decodeURIComponent(i)}else{t[n]=decodeURIComponent(i)}});return t};var isNative=function(){var e=navigator.userAgent.toLowerCase();return/upchat/.test(e)?true:false};var isIos=function(){var e=navigator.userAgent.toLowerCase();var t=new RegExp(/iphone|ipad/);return t.test(e)};var isWk=function(){var e=navigator.userAgent.toLowerCase();var t=new RegExp(/nitro/);return t.test(e)};function isElectron(){var e=navigator.userAgent.toLowerCase();var t=new RegExp(/electron/);return t.test(e)}var osp=isIos()?"ios_":"android_",version="3.0.0";var query=query2Obj(location.search);var cordova_ver=query.cver?query.cver:"";cordova_ver=cordova_ver||version;var p=window.location.href.indexOf("https")==0?"https":"http";if(isNative()){if(isIos()&&isWk()){document.write('<script type="text/javascript" src="'+p+'://upchat.95516.net/public/scripts/cordova/min/wk_webkit-min.js"></script>')}else if(isElectron()){document.write('<script type="text/javascript" src="'+p+'://upchat.95516.net/public/scripts/cordova/min/electron-min.js"></script>')}else{document.write('<script type="text/javascript" src="'+p+"://upchat.95516.net/public/scripts/cordova/min/cordova."+osp+cordova_ver+'-min.js"></script>')}}